<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns="http://www.tibco.com/pe/SignalInActivitySchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:ns1="http://www.tibco.com/pe/DeployedVarsType" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <pd:name>MobCastleAD/UpdateByID_9996.process</pd:name>
    <pd:startName>HTTP Receiver</pd:startName>
    <pd:startX>0</pd:startX>
    <pd:startY>0</pd:startY>
    <pd:returnBindings/>
    <pd:starter name="HTTP Receiver">
        <pd:type>com.tibco.plugin.http.HTTPEventSource</pd:type>
        <pd:resourceType>httppalette.httpEventSource</pd:resourceType>
        <pd:x>66</pd:x>
        <pd:y>55</pd:y>
        <config>
            <outputMode>String</outputMode>
            <defaultEncoding>UTF8</defaultEncoding>
            <inputOutputVersion>5.3.0</inputOutputVersion>
            <newMimeSupport>true</newMimeSupport>
            <sharedChannel>/MobCastleAD/9996.sharedhttp</sharedChannel>
            <parsePostData>true</parsePostData>
            <useHTTPAuthentication>false</useHTTPAuthentication>
            <customField>
                <row>
                    <attribute>offer_id</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>product_id</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>campaign_id</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>n_id</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>advertiser_id</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>tableName</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>addflag</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>offer_click_tl</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>campaign_pl</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>canpaign_tl</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>n_pl</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
                <row>
                    <attribute>product_lp</attribute>
                    <attributeType>string</attributeType>
                    <attributeCard>optional</attributeCard>
                </row>
            </customField>
            <Headers>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="Accept" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Accept-Charset" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Accept-Encoding" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Length" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Connection" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </Headers>
        </config>
        <pd:inputBindings/>
    </pd:starter>
    <pd:endName>End</pd:endName>
    <pd:endX>595</pd:endX>
    <pd:endY>55</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables/>
    <pd:targetNamespace>http://xmlns.example.com/1474806608604</pd:targetNamespace>
    <pd:activity name="SQL Direct">
        <pd:type>com.tibco.plugin.jdbc.JDBCGeneralActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCGeneralActivity</pd:resourceType>
        <pd:x>202</pd:x>
        <pd:y>51</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <jdbcSharedConfig>/0920UpdateTables/MySql.sharedjdbc</jdbcSharedConfig>
        </config>
        <pd:inputBindings>
            <jdbcGeneralActivityInput>
                <statement>
                    <xsl:value-of select="concat(&quot;select * from &quot;,substring-before(substring-after($HTTP-Receiver/ProcessStarterOutput/RequestURI, &quot;?&quot;),&quot;_&quot;),&quot; where &quot;,substring-after($HTTP-Receiver/ProcessStarterOutput/RequestURI, &quot;?&quot;))"/>
                </statement>
            </jdbcGeneralActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="ShowUpdateByIdView">
        <pd:type>com.tibco.plugin.http.HTTPResponseActivity</pd:type>
        <pd:resourceType>httppalette.httpWebResponse</pd:resourceType>
        <pd:x>464</pd:x>
        <pd:y>52</pd:y>
        <config>
            <closeConnection>true</closeConnection>
            <eventSource>HTTP Receiver</eventSource>
            <Headers>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="StatusLine" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Set-Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Location" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </Headers>
        </config>
        <pd:inputBindings>
            <ResponseActivityInput>
                <asciiContent>
                    <xsl:value-of select="$Call-Process/root/param"/>
                </asciiContent>
            </ResponseActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Call Process">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>321</pd:x>
        <pd:y>52</pd:y>
        <config>
            <processName>/MobCastleAD/DetailsByIdForUpdateAdd.process</processName>
        </config>
        <pd:inputBindings>
            <root>
                <unknownResultset>
                    <xsl:for-each select="$SQL-Direct/jdbcGeneralActivityOutput/unknownResultset/row">
                        <row>
                            <xsl:for-each select="column">
                                <column>
                                    <name>
                                        <xsl:value-of select="name"/>
                                    </name>
                                    <xsl:if test="not((value/@xsi:nil=(&quot;true&quot;)) or (value/@xsi:nil=(&quot;1&quot;)))">
                                        <value>
                                            <xsl:value-of select="value"/>
                                        </value>
                                    </xsl:if>
                                </column>
                            </xsl:for-each>
                        </row>
                    </xsl:for-each>
                </unknownResultset>
                <Tablename>
                    <xsl:value-of select="substring-before(substring-after($HTTP-Receiver/ProcessStarterOutput/RequestURI, &quot;?&quot;),&quot;_&quot;)"/>
                </Tablename>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="GetColumns">
        <pd:type>com.tibco.plugin.jdbc.JDBCGeneralActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCGeneralActivity</pd:resourceType>
        <pd:x>192</pd:x>
        <pd:y>114</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <jdbcSharedConfig>/0920UpdateTables/MySql.sharedjdbc</jdbcSharedConfig>
        </config>
        <pd:inputBindings>
            <jdbcGeneralActivityInput>
                <statement>
                    <xsl:value-of select="concat(&quot;select * from &quot;,$HTTP-Receiver/ProcessStarterOutput/parameters/tableName,&quot; limit 1&quot;)"/>
                </statement>
            </jdbcGeneralActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Java Code">
        <pd:type>com.tibco.plugin.java.JavaActivity</pd:type>
        <pd:resourceType>ae.javapalette.javaActivity</pd:resourceType>
        <pd:description>get :   substring-after($HTTP-Receiver/ProcessStarterOutput/RequestURI, '?')
post : post data

why post data does not have a fix order for columns ?

tableName=product&amp;product_type=as&amp;product_id=25&amp;product_OS=25&amp;product_status=25&amp;product_Ip=25&amp;product_name=25&amp;product_dcp=25&amp;advertiser_id=12&amp;addflag=1

if date is empty, there is error</pd:description>
        <pd:x>256</pd:x>
        <pd:y>209</pd:y>
        <config>
            <fileName>UpdateByID_9996JavaCode</fileName>
            <packageName>MobCastleAD.UpdateByID_9996</packageName>
            <fullsource>package MobCastleAD.UpdateByID_9996;
import java.util.*;
import java.io.*;
public class UpdateByID_9996JavaCode{
/****** START SET/GET METHOD, DO NOT MODIFY *****/
	protected String AllParams = "";
	protected String offer_click_tl_replace = "";
	protected String link_judge = "";
	protected String nextId = "";
	protected String idName = "";
	protected String MapStr = "";
	protected String[] NameValuePair = null;
	protected String AfterValueQuote = "";
	protected String valueQuote = "";
	protected String names = "";
	public String getAllParams() {
		return AllParams;
	}
	public void setAllParams(String val) {
		AllParams = val;
	}
	public String getoffer_click_tl_replace() {
		return offer_click_tl_replace;
	}
	public void setoffer_click_tl_replace(String val) {
		offer_click_tl_replace = val;
	}
	public String getlink_judge() {
		return link_judge;
	}
	public void setlink_judge(String val) {
		link_judge = val;
	}
	public String getnextId() {
		return nextId;
	}
	public void setnextId(String val) {
		nextId = val;
	}
	public String getidName() {
		return idName;
	}
	public void setidName(String val) {
		idName = val;
	}
	public String getMapStr() {
		return MapStr;
	}
	public void setMapStr(String val) {
		MapStr = val;
	}
	public String[] getNameValuePair() {
		return NameValuePair;
	}
	public void setNameValuePair(String[] val) {
		NameValuePair = val;
	}
	public String getAfterValueQuote() {
		return AfterValueQuote;
	}
	public void setAfterValueQuote(String val) {
		AfterValueQuote = val;
	}
	public String getvalueQuote() {
		return valueQuote;
	}
	public void setvalueQuote(String val) {
		valueQuote = val;
	}
	public String getnames() {
		return names;
	}
	public void setnames(String val) {
		names = val;
	}
/****** END SET/GET METHOD, DO NOT MODIFY *****/
	public UpdateByID_9996JavaCode() {
	}
	public void invoke() throws Exception {
/* Available Variables: DO NOT MODIFY
	In  : String AllParams
	In  : String offer_click_tl_replace
	In  : String link_judge
	In  : String nextId
	In  : String idName
	Out : String MapStr
	Out : String[] NameValuePair
	Out : String AfterValueQuote
	Out : String valueQuote
	Out : String names
	Out : String link_judge
	Out : String nextId
* Available Variables: DO NOT MODIFY *****/
//AllParams=AllParams.replace(offer_click_tl_replace,"\""+offer_click_tl_replace+"\"");
if("NoLinkContained".equals(link_judge)){
System.out.println("before first replace : \t "+AllParams);
AllParams=AllParams.replace(link_judge,"link_judge");
System.out.println(" after first replace : \t "+AllParams);
}

NameValuePair=AllParams.split("&amp;");
List&lt;String&gt; slist= new ArrayList&lt;String&gt;();
List&lt;String&gt; slist_value= new ArrayList&lt;String&gt;();
List&lt;String&gt; slist_name= new ArrayList&lt;String&gt;();
			for(String str:NameValuePair)
		{
		String[] i=str.split("=");

 String tmp_i=(i.length&lt;2)?"'"+"'":"'"+i[1]+"'";
		
		slist.add(i[0]+"="+tmp_i);
if(i[0].equals(idName)){
tmp_i=nextId;
}
slist_value.add(tmp_i);
		slist_name.add(i[0]);
		}
AfterValueQuote=slist.toString();
if("NoLinkContained".equals(link_judge)){
AfterValueQuote=AfterValueQuote.replace("link_judge",link_judge);
}
valueQuote=slist_value.toString();
names=slist_name.toString();
/*
String[] AllParams_array=AllParams.split("&amp;");
String[] str_array;
HashMap&lt;String,String&gt; map=new HashMap&lt;String,String&gt;();

			for(String str:AllParams_array)
		{
		 System.out.println(str);
		NameValuePair=str;
		str_array=str.split("=");
		map.put(str_array[0],str_array[1]);
		}
MapStr=map.toString();
*/}
}
</fullsource>
            <outputData>
                <row>
                    <fieldName>MapStr</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>NameValuePair</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>repeating</fieldRequired>
                </row>
                <row>
                    <fieldName>AfterValueQuote</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>valueQuote</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>names</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>link_judge</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>nextId</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </outputData>
            <inputData>
                <row>
                    <fieldName>AllParams</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>offer_click_tl_replace</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>link_judge</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>nextId</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>idName</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </inputData>
            <byteCode>
                <class>
                    <name>UpdateByID_9996JavaCode</name>
                    <byteCode>yv66vgAAADQAiwkAIgBWCQAiAFcJACIAWAkAIgBZCQAiAFoJACIAWwkAIgBcCQAiAF0JACIAXgkAIgBfCgAjAGAIAGEIAGIKAGMAZAkAZQBmBwBnCgAQAGAIAGgKABAAaQoAEABqCgBrAGwIACcKAGMAbQgAbggAbwoAYwBwBwBxCgAbAGAIAHIIAHMIAHQLAHUAdgoAIwBqBwB3BwB4AQAJQWxsUGFyYW1zAQASTGphdmEvbGFuZy9TdHJpbmc7AQAWb2ZmZXJfY2xpY2tfdGxfcmVwbGFjZQEACmxpbmtfanVkZ2UBAAZuZXh0SWQBAAZpZE5hbWUBAAZNYXBTdHIBAA1OYW1lVmFsdWVQYWlyAQATW0xqYXZhL2xhbmcvU3RyaW5nOwEAD0FmdGVyVmFsdWVRdW90ZQEACnZhbHVlUXVvdGUBAAVuYW1lcwEADGdldEFsbFBhcmFtcwEAFCgpTGphdmEvbGFuZy9TdHJpbmc7AQAEQ29kZQEAD0xpbmVOdW1iZXJUYWJsZQEADHNldEFsbFBhcmFtcwEAFShMamF2YS9sYW5nL1N0cmluZzspVgEAGWdldG9mZmVyX2NsaWNrX3RsX3JlcGxhY2UBABlzZXRvZmZlcl9jbGlja190bF9yZXBsYWNlAQANZ2V0bGlua19qdWRnZQEADXNldGxpbmtfanVkZ2UBAAlnZXRuZXh0SWQBAAlzZXRuZXh0SWQBAAlnZXRpZE5hbWUBAAlzZXRpZE5hbWUBAAlnZXRNYXBTdHIBAAlzZXRNYXBTdHIBABBnZXROYW1lVmFsdWVQYWlyAQAVKClbTGphdmEvbGFuZy9TdHJpbmc7AQAQc2V0TmFtZVZhbHVlUGFpcgEAFihbTGphdmEvbGFuZy9TdHJpbmc7KVYBABJnZXRBZnRlclZhbHVlUXVvdGUBABJzZXRBZnRlclZhbHVlUXVvdGUBAA1nZXR2YWx1ZVF1b3RlAQANc2V0dmFsdWVRdW90ZQEACGdldG5hbWVzAQAIc2V0bmFtZXMBAAY8aW5pdD4BAAMoKVYBAAZpbnZva2UBAA1TdGFja01hcFRhYmxlBwB3BwB5BwAsBwB6AQAKRXhjZXB0aW9ucwcAewEAClNvdXJjZUZpbGUBABxVcGRhdGVCeUlEXzk5OTZKYXZhQ29kZS5qYXZhDAAkACUMACYAJQwAJwAlDAAoACUMACkAJQwAKgAlDAArACwMAC0AJQwALgAlDAAvACUMAEoASwEAAAEAD05vTGlua0NvbnRhaW5lZAcAegwAfAB9BwB+DAB/AIABABdqYXZhL2xhbmcvU3RyaW5nQnVpbGRlcgEAGWJlZm9yZSBmaXJzdCByZXBsYWNlIDogCSAMAIEAggwAgwAxBwCEDACFADUMAIYAhwEAGSBhZnRlciBmaXJzdCByZXBsYWNlIDogCSABAAEmDACIAIkBABNqYXZhL3V0aWwvQXJyYXlMaXN0AQABPQEAAicnAQABJwcAeQwAigB9AQAzTW9iQ2FzdGxlQUQvVXBkYXRlQnlJRF85OTk2L1VwZGF0ZUJ5SURfOTk5NkphdmFDb2RlAQAQamF2YS9sYW5nL09iamVjdAEADmphdmEvdXRpbC9MaXN0AQAQamF2YS9sYW5nL1N0cmluZwEAE2phdmEvbGFuZy9FeGNlcHRpb24BAAZlcXVhbHMBABUoTGphdmEvbGFuZy9PYmplY3Q7KVoBABBqYXZhL2xhbmcvU3lzdGVtAQADb3V0AQAVTGphdmEvaW8vUHJpbnRTdHJlYW07AQAGYXBwZW5kAQAtKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1N0cmluZ0J1aWxkZXI7AQAIdG9TdHJpbmcBABNqYXZhL2lvL1ByaW50U3RyZWFtAQAHcHJpbnRsbgEAB3JlcGxhY2UBAEQoTGphdmEvbGFuZy9DaGFyU2VxdWVuY2U7TGphdmEvbGFuZy9DaGFyU2VxdWVuY2U7KUxqYXZhL2xhbmcvU3RyaW5nOwEABXNwbGl0AQAnKExqYXZhL2xhbmcvU3RyaW5nOylbTGphdmEvbGFuZy9TdHJpbmc7AQADYWRkACEAIgAjAAAACgAEACQAJQAAAAQAJgAlAAAABAAnACUAAAAEACgAJQAAAAQAKQAlAAAABAAqACUAAAAEACsALAAAAAQALQAlAAAABAAuACUAAAAEAC8AJQAAABYAAQAwADEAAQAyAAAAHQABAAEAAAAFKrQAAbAAAAABADMAAAAGAAEAAAARAAEANAA1AAEAMgAAACIAAgACAAAABiortQABsQAAAAEAMwAAAAoAAgAAABQABQAVAAEANgAxAAEAMgAAAB0AAQABAAAABSq0AAKwAAAAAQAzAAAABgABAAAAFwABADcANQABADIAAAAiAAIAAgAAAAYqK7UAArEAAAABADMAAAAKAAIAAAAaAAUAGwABADgAMQABADIAAAAdAAEAAQAAAAUqtAADsAAAAAEAMwAAAAYAAQAAAB0AAQA5ADUAAQAyAAAAIgACAAIAAAAGKiu1AAOxAAAAAQAzAAAACgACAAAAIAAFACEAAQA6ADEAAQAyAAAAHQABAAEAAAAFKrQABLAAAAABADMAAAAGAAEAAAAjAAEAOwA1AAEAMgAAACIAAgACAAAABiortQAEsQAAAAEAMwAAAAoAAgAAACYABQAnAAEAPAAxAAEAMgAAAB0AAQABAAAABSq0AAWwAAAAAQAzAAAABgABAAAAKQABAD0ANQABADIAAAAiAAIAAgAAAAYqK7UABbEAAAABADMAAAAKAAIAAAAsAAUALQABAD4AMQABADIAAAAdAAEAAQAAAAUqtAAGsAAAAAEAMwAAAAYAAQAAAC8AAQA/ADUAAQAyAAAAIgACAAIAAAAGKiu1AAaxAAAAAQAzAAAACgACAAAAMgAFADMAAQBAAEEAAQAyAAAAHQABAAEAAAAFKrQAB7AAAAABADMAAAAGAAEAAAA1AAEAQgBDAAEAMgAAACIAAgACAAAABiortQAHsQAAAAEAMwAAAAoAAgAAADgABQA5AAEARAAxAAEAMgAAAB0AAQABAAAABSq0AAiwAAAAAQAzAAAABgABAAAAOwABAEUANQABADIAAAAiAAIAAgAAAAYqK7UACLEAAAABADMAAAAKAAIAAAA+AAUAPwABAEYAMQABADIAAAAdAAEAAQAAAAUqtAAJsAAAAAEAMwAAAAYAAQAAAEEAAQBHADUAAQAyAAAAIgACAAIAAAAGKiu1AAmxAAAAAQAzAAAACgACAAAARAAFAEUAAQBIADEAAQAyAAAAHQABAAEAAAAFKrQACrAAAAABADMAAAAGAAEAAABHAAEASQA1AAEAMgAAACIAAgACAAAABiortQAKsQAAAAEAMwAAAAoAAgAAAEoABQBLAAEASgBLAAEAMgAAAIQAAgABAAAAQCq3AAsqEgy1AAEqEgy1AAIqEgy1AAMqEgy1AAQqEgy1AAUqEgy1AAYqAbUAByoSDLUACCoSDLUACSoSDLUACrEAAAABADMAAAAyAAwAAABNAAQABgAKAAcAEAAIABYACQAcAAoAIgALACgADAAtAA0AMwAOADkADwA/AE4AAQBMAEsAAgAyAAACCAAEAAoAAAFOEg0qtAADtgAOmQBMsgAPuwAQWbcAERIStgATKrQAAbYAE7YAFLYAFSoqtAABKrQAAxIWtgAXtQABsgAPuwAQWbcAERIYtgATKrQAAbYAE7YAFLYAFSoqtAABEhm2ABq1AAe7ABtZtwAcTLsAG1m3ABxNuwAbWbcAHE4qtAAHOgQZBL42BQM2BhUGFQWiAIwZBBUGMjoHGQcSHbYAGjoIGQi+BaIACBIepwAeuwAQWbcAERIftgATGQgEMrYAExIftgATtgAUOgkruwAQWbcAERkIAzK2ABMSHbYAExkJtgATtgAUuQAgAgBXGQgDMiq0AAW2AA6ZAAkqtAAEOgksGQm5ACACAFctGQgDMrkAIAIAV4QGAaf/cyortgAhtQAIEg0qtAADtgAOmQAUKiq0AAgSFiq0AAO2ABe1AAgqLLYAIbUACSottgAhtQAKsQAAAAIAMwAAAF4AFwAAAF8ADABgACgAYQA5AGIAVQBlAGIAZgBqAGcAcgBoAHoAaQCWAGsAnwBtAMgAbwDqAHAA+ABxAP4AcwEHAHQBEgBpARgAdgEgAHcBLAB4AT0AegFFAHsBTQCJAE0AAABEAAf7AFX/ADIABwcATgcATwcATwcATwcAUAEBAAD9ACIHAFEHAFBaBwBR/AA3BwBR/wAZAAQHAE4HAE8HAE8HAE8AACQAUgAAAAQAAQBTAAEAVAAAAAIAVQ==</byteCode>
                </class>
            </byteCode>
        </config>
        <pd:inputBindings>
            <javaCodeActivityInput>
                <AllParams>
                    <xsl:value-of select="tib:substring-before-last(substring-after($HTTP-Receiver/ProcessStarterOutput/PostData, &quot;&amp;&quot;), &quot;&amp;&quot;)"/>
                </AllParams>
                <offer_click_tl_replace>
                    <xsl:value-of select="substring-before(substring-after(tib:substring-before-last(substring-after($HTTP-Receiver/ProcessStarterOutput/PostData, &quot;&amp;&quot;), &quot;&amp;&quot;), &quot;offer_click_tl=&quot;),&quot;&amp;&quot;)"/>
                </offer_click_tl_replace>
                <xsl:choose>
                    <xsl:when test="$HTTP-Receiver/ProcessStarterOutput/parameters/offer_click_tl!=&quot;&quot;">
                        <xsl:if test="$HTTP-Receiver/ProcessStarterOutput/parameters/offer_click_tl">
                            <link_judge>
                                <xsl:value-of select="$HTTP-Receiver/ProcessStarterOutput/parameters/offer_click_tl"/>
                            </link_judge>
                        </xsl:if>
                    </xsl:when>
                    <xsl:when test="$HTTP-Receiver/ProcessStarterOutput/parameters/canpaign_tl!=&quot;&quot;">
                        <xsl:if test="$HTTP-Receiver/ProcessStarterOutput/parameters/canpaign_tl">
                            <link_judge>
                                <xsl:value-of select="$HTTP-Receiver/ProcessStarterOutput/parameters/canpaign_tl"/>
                            </link_judge>
                        </xsl:if>
                    </xsl:when>
                    <xsl:when test="$HTTP-Receiver/ProcessStarterOutput/parameters/n_pl!=&quot;&quot;">
                        <xsl:if test="$HTTP-Receiver/ProcessStarterOutput/parameters/n_pl">
                            <link_judge>
                                <xsl:value-of select="$HTTP-Receiver/ProcessStarterOutput/parameters/n_pl"/>
                            </link_judge>
                        </xsl:if>
                    </xsl:when>
                    <xsl:when test="$HTTP-Receiver/ProcessStarterOutput/parameters/product_lp!=&quot;&quot;">
                        <xsl:if test="$HTTP-Receiver/ProcessStarterOutput/parameters/product_lp">
                            <link_judge>
                                <xsl:value-of select="$HTTP-Receiver/ProcessStarterOutput/parameters/product_lp"/>
                            </link_judge>
                        </xsl:if>
                    </xsl:when>
                    <xsl:otherwise>
                        <link_judge>
                            <xsl:value-of select="&quot;NoLinkContained&quot;"/>
                        </link_judge>
                    </xsl:otherwise>
                </xsl:choose>
                <xsl:if test="not(($getNextId/jdbcGeneralActivityOutput/unknownResultset[1]/row[1]/column[1]/value/@xsi:nil=(&quot;true&quot;)) or ($getNextId/jdbcGeneralActivityOutput/unknownResultset[1]/row[1]/column[1]/value/@xsi:nil=(&quot;1&quot;)))">
                    <xsl:choose>
                        <xsl:when test="$Port/root/id>0">
                            <xsl:if test="$Port/root/id">
                                <nextId>
                                    <xsl:value-of select="$Port/root/id"/>
                                </nextId>
                            </xsl:if>
                        </xsl:when>
                        <xsl:otherwise>
                            <nextId>
                                <xsl:value-of select="$getNextId/jdbcGeneralActivityOutput/unknownResultset[1]/row[1]/column[1]/value"/>
                            </nextId>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:if>
                <idName>
                    <xsl:value-of select="concat($Map-Data/root/tableName, &quot;_id&quot;)"/>
                </idName>
            </javaCodeActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Send HTTP Response">
        <pd:type>com.tibco.plugin.http.HTTPResponseActivity</pd:type>
        <pd:resourceType>httppalette.httpWebResponse</pd:resourceType>
        <pd:x>549</pd:x>
        <pd:y>193</pd:y>
        <config>
            <closeConnection>true</closeConnection>
            <eventSource>HTTP Receiver</eventSource>
            <Headers>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="StatusLine" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Set-Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Location" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </Headers>
        </config>
        <pd:inputBindings>
            <ResponseActivityInput>
                <Headers>
                    <StatusLine>
                        <xsl:value-of select="&quot;HTTP/1.1 302 Moved Temporarily&quot;"/>
                    </StatusLine>
                    <Location>
                        <xsl:value-of select="concat($_globalVariables/ns1:GlobalVariables/ProjectGV/HrefLine_hostname,$Port/root/param,&quot;/check&quot;,$Port/root/tableName,&quot;?&quot;,$Port/root/tableName,&quot;_id=&quot;,$Java-Code/javaCodeActivityOutput/nextId&#xA;&#xA;&#xA;&#xA;)"/>
                    </Location>
                </Headers>
            </ResponseActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="UpdateSet">
        <pd:type>com.tibco.plugin.jdbc.JDBCGeneralActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCGeneralActivity</pd:resourceType>
        <pd:description>the only problem is that the sql ask for '' for values, otherwise it fails !




tib:concat-sequence(for $var in $HTTP-Receiver/ProcessStarterOutput/parameters/* return (
if(contains(name($var),concat($Map-Data/root/tableName,"_id"))) then concat("'",$var,"'")
else ""
))


concat("update ",substring-after(substring-before($HTTP-Receiver/ProcessStarterOutput/RequestURI, "_id"), "?")," set ",tib:concat-sequence-format($Java-Code/javaCodeActivityOutput/NameValuePair, ",")," where ",substring-after(substring-before($HTTP-Receiver/ProcessStarterOutput/RequestURI, "&amp;amp;"), "?"))

get :  concat("update ",$Map-Data/root/tableName," set ",tib:substring-before-last(substring-after($Java-Code/javaCodeActivityOutput/AfterValueQuote, "["), "]")," where ",substring-after(substring-before($HTTP-Receiver/ProcessStarterOutput/RequestURI, "&amp;amp;"), "?"))

concat("update ",$Map-Data/root/tableName," set ",tib:substring-before-last(substring-after($Java-Code/javaCodeActivityOutput/AfterValueQuote, "["), "]")," where ",$Map-Data/root/tableName,"_id=",substring-before(substring-after($HTTP-Receiver/ProcessStarterOutput/PostData, concat($Map-Data/root/tableName,"_id=")), "&amp;amp;"))


,

substring-before(substring-after($Java-Code/javaCodeActivityOutput/AfterValueQuote, concat($Map-Data/root/tableName,"_id=")), ","))</pd:description>
        <pd:x>414</pd:x>
        <pd:y>245</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <jdbcSharedConfig>/0920UpdateTables/MySql.sharedjdbc</jdbcSharedConfig>
        </config>
        <pd:inputBindings>
            <jdbcGeneralActivityInput>
                <statement>
                    <xsl:value-of select="concat(&quot;update &quot;,$Map-Data/root/tableName,&quot; set &quot;,tib:substring-before-last(substring-after($Java-Code/javaCodeActivityOutput/AfterValueQuote, &quot;[&quot;), &quot;]&quot;),&quot; where &quot;,&#xA;&#xA;$Map-Data/root/tableName,&quot;_id=&quot;,&#xA;&#xA;$Port/root/id&#xA;&#xA;)"/>
                </statement>
            </jdbcGeneralActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Port">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:description>tib:concat-sequence(for $var in $HTTP-Receiver/ProcessStarterOutput/parameters/* return (
if(contains(name($var),concat($Map-Data/root/tableName,"_id"))) then concat("'",$var,"'")
else ""
))</pd:description>
        <pd:x>60</pd:x>
        <pd:y>279</pd:y>
        <config>
            <element>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="param" type="xsd:int" minOccurs="0"/>
                            <xsd:element name="tableName" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="id" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </element>
        </config>
        <pd:inputBindings>
            <root>
                <xsl:choose xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
                    <xsl:when test="$Map-Data/root/tableName=&quot;n&quot;">
                        <param>
                            <xsl:value-of select="9997"/>
                        </param>
                    </xsl:when>
                    <xsl:when test="$Map-Data/root/tableName=&quot;advertiser&quot;">
                        <param>
                            <xsl:value-of select="9992"/>
                        </param>
                    </xsl:when>
                    <xsl:when test="$Map-Data/root/tableName=&quot;product&quot;">
                        <param>
                            <xsl:value-of select="9993"/>
                        </param>
                    </xsl:when>
                    <xsl:when test="$Map-Data/root/tableName=&quot;offer&quot;">
                        <param>
                            <xsl:value-of select="9994"/>
                        </param>
                    </xsl:when>
                    <xsl:when test="$Map-Data/root/tableName=&quot;campaign&quot;">
                        <param>
                            <xsl:value-of select="9995"/>
                        </param>
                    </xsl:when>
                </xsl:choose>
                <tableName>
                    <xsl:value-of select="$Map-Data/root/tableName"/>
                </tableName>
                <id>
                    <xsl:value-of select="tib:concat-sequence(for $var in $HTTP-Receiver/ProcessStarterOutput/parameters/* return (&#xA;if(contains(name($var),concat($Map-Data/root/tableName,&quot;_id&quot;))) then concat(&quot;&quot;,$var,&quot;&quot;)&#xA;else &quot;&quot;&#xA;))"/>
                </id>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Map Data">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>65</pd:x>
        <pd:y>173</pd:y>
        <config>
            <element>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="tableName" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </element>
        </config>
        <pd:inputBindings>
            <root>
                <xsl:choose>
                    <xsl:when test="$HTTP-Receiver/ProcessStarterOutput/parameters/tableName!=&quot;&quot;">
                        <tableName>
                            <xsl:value-of select="$HTTP-Receiver/ProcessStarterOutput/parameters/tableName"/>
                        </tableName>
                    </xsl:when>
                    <xsl:when test="$HTTP-Receiver/ProcessStarterOutput/RequestURI!=&quot;&quot;">
                        <tableName>
                            <xsl:value-of select="substring-before(substring-after($HTTP-Receiver/ProcessStarterOutput/RequestURI, &quot;?&quot;),&quot;&amp;&quot;)"/>
                        </tableName>
                    </xsl:when>
                </xsl:choose>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Add">
        <pd:type>com.tibco.plugin.jdbc.JDBCGeneralActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCGeneralActivity</pd:resourceType>
        <pd:description>the only problem is that the sql ask for '' for values, otherwise it fails !

concat("update ",substring-after(substring-before($HTTP-Receiver/ProcessStarterOutput/RequestURI, "_id"), "?")," set ",tib:concat-sequence-format($Java-Code/javaCodeActivityOutput/NameValuePair, ",")," where ",substring-after(substring-before($HTTP-Receiver/ProcessStarterOutput/RequestURI, "&amp;amp;"), "?"))</pd:description>
        <pd:x>408</pd:x>
        <pd:y>163</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <jdbcSharedConfig>/0920UpdateTables/MySql.sharedjdbc</jdbcSharedConfig>
        </config>
        <pd:inputBindings>
            <jdbcGeneralActivityInput>
                <statement>
                    <xsl:value-of select="concat(&quot;insert into &quot;,$Map-Data/root/tableName,&quot;(&quot;,tib:substring-before-last(substring-after($Java-Code/javaCodeActivityOutput/names, &quot;[&quot;), &quot;]&quot;),&quot;) values(&quot;,tib:substring-before-last(substring-after($Java-Code/javaCodeActivityOutput/valueQuote, &quot;[&quot;), &quot;]&quot;),&quot;)&quot;)"/>
                </statement>
            </jdbcGeneralActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="ShowAddPage">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:description>it seems I need a new subprocess because when I reuse this, the row number of RS would cause issue</pd:description>
        <pd:x>348</pd:x>
        <pd:y>112</pd:y>
        <config>
            <processName>/MobCastleAD/DetailsByIdForUpdateAdd.process</processName>
        </config>
        <pd:inputBindings>
            <root>
                <unknownResultset>
                    <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$GetColumns/jdbcGeneralActivityOutput/unknownResultset/row">
                        <row>
                            <xsl:for-each select="column">
                                <column>
                                    <name>
                                        <xsl:value-of select="name"/>
                                    </name>
                                </column>
                            </xsl:for-each>
                        </row>
                    </xsl:for-each>
                </unknownResultset>
                <Tablename>
                    <xsl:value-of select="$HTTP-Receiver/ProcessStarterOutput/parameters/tableName"/>
                </Tablename>
                <addflag>
                    <xsl:value-of select="&quot;1&quot;"/>
                </addflag>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="ShowAddPageView">
        <pd:type>com.tibco.plugin.http.HTTPResponseActivity</pd:type>
        <pd:resourceType>httppalette.httpWebResponse</pd:resourceType>
        <pd:x>696</pd:x>
        <pd:y>128</pd:y>
        <config>
            <closeConnection>true</closeConnection>
            <eventSource>HTTP Receiver</eventSource>
            <Headers>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="StatusLine" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Set-Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Location" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </Headers>
        </config>
        <pd:inputBindings>
            <ResponseActivityInput>
                <asciiContent>
                    <xsl:value-of select="$ReplaceReadOnlyForAdd/javaCodeActivityOutput/out"/>
                </asciiContent>
            </ResponseActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="ReplaceReadOnlyForAdd">
        <pd:type>com.tibco.plugin.java.JavaActivity</pd:type>
        <pd:resourceType>ae.javapalette.javaActivity</pd:resourceType>
        <pd:x>491</pd:x>
        <pd:y>117</pd:y>
        <config>
            <fileName>UpdateByID_9996ReplaceReadOnlyForAdd</fileName>
            <packageName>MobCastleAD.UpdateByID_9996</packageName>
            <fullsource>package MobCastleAD.UpdateByID_9996;
import java.util.*;
import java.io.*;
public class UpdateByID_9996ReplaceReadOnlyForAdd{
/****** START SET/GET METHOD, DO NOT MODIFY *****/
	protected String in = "";
	protected String out = "";
	public String getin() {
		return in;
	}
	public void setin(String val) {
		in = val;
	}
	public String getout() {
		return out;
	}
	public void setout(String val) {
		out = val;
	}
/****** END SET/GET METHOD, DO NOT MODIFY *****/
	public UpdateByID_9996ReplaceReadOnlyForAdd() {
	}
	public void invoke() throws Exception {
/* Available Variables: DO NOT MODIFY
	In  : String in
	Out : String out
* Available Variables: DO NOT MODIFY *****/

in=in.replaceAll("readonly","");
out=in;}
}
</fullsource>
            <inputData>
                <row>
                    <fieldName>in</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </inputData>
            <outputData>
                <row>
                    <fieldName>out</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </outputData>
            <byteCode>
                <class>
                    <name>UpdateByID_9996ReplaceReadOnlyForAdd</name>
                    <byteCode>yv66vgAAADQAKAkABwAbCQAHABwKAAgAHQgAHggAHwoAIAAhBwAiBwAjAQACaW4BABJMamF2YS9sYW5nL1N0cmluZzsBAANvdXQBAAVnZXRpbgEAFCgpTGphdmEvbGFuZy9TdHJpbmc7AQAEQ29kZQEAD0xpbmVOdW1iZXJUYWJsZQEABXNldGluAQAVKExqYXZhL2xhbmcvU3RyaW5nOylWAQAGZ2V0b3V0AQAGc2V0b3V0AQAGPGluaXQ+AQADKClWAQAGaW52b2tlAQAKRXhjZXB0aW9ucwcAJAEAClNvdXJjZUZpbGUBAClVcGRhdGVCeUlEXzk5OTZSZXBsYWNlUmVhZE9ubHlGb3JBZGQuamF2YQwACQAKDAALAAoMABQAFQEAAAEACHJlYWRvbmx5BwAlDAAmACcBAEBNb2JDYXN0bGVBRC9VcGRhdGVCeUlEXzk5OTYvVXBkYXRlQnlJRF85OTk2UmVwbGFjZVJlYWRPbmx5Rm9yQWRkAQAQamF2YS9sYW5nL09iamVjdAEAE2phdmEvbGFuZy9FeGNlcHRpb24BABBqYXZhL2xhbmcvU3RyaW5nAQAKcmVwbGFjZUFsbAEAOChMamF2YS9sYW5nL1N0cmluZztMamF2YS9sYW5nL1N0cmluZzspTGphdmEvbGFuZy9TdHJpbmc7ACEABwAIAAAAAgAEAAkACgAAAAQACwAKAAAABgABAAwADQABAA4AAAAdAAEAAQAAAAUqtAABsAAAAAEADwAAAAYAAQAAAAkAAQAQABEAAQAOAAAAIgACAAIAAAAGKiu1AAGxAAAAAQAPAAAACgACAAAADAAFAA0AAQASAA0AAQAOAAAAHQABAAEAAAAFKrQAArAAAAABAA8AAAAGAAEAAAAPAAEAEwARAAEADgAAACIAAgACAAAABiortQACsQAAAAEADwAAAAoAAgAAABIABQATAAEAFAAVAAEADgAAADUAAgABAAAAESq3AAMqEgS1AAEqEgS1AAKxAAAAAQAPAAAAEgAEAAAAFQAEAAYACgAHABAAFgABABYAFQACAA4AAAA0AAQAAQAAABgqKrQAARIFEgS2AAa1AAEqKrQAAbUAArEAAAABAA8AAAAKAAIAAAAdAA8AHgAXAAAABAABABgAAQAZAAAAAgAa</byteCode>
                </class>
            </byteCode>
        </config>
        <pd:inputBindings>
            <javaCodeActivityInput>
                <in>
                    <xsl:value-of select="$ShowAddPage/root/param"/>
                </in>
            </javaCodeActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="NotAllowed">
        <pd:type>com.tibco.plugin.http.HTTPResponseActivity</pd:type>
        <pd:resourceType>httppalette.httpWebResponse</pd:resourceType>
        <pd:x>828</pd:x>
        <pd:y>100</pd:y>
        <config>
            <closeConnection>true</closeConnection>
            <eventSource>HTTP Receiver</eventSource>
            <Headers>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="StatusLine" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Set-Cookie" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Pragma" type="xsd:string" minOccurs="0"/>
                            <xsd:element name="Location" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </Headers>
        </config>
        <pd:inputBindings>
            <ResponseActivityInput>
                <asciiContent>
                    <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="&quot; Url not allowed for access. Please contact web site Admin if any help needed.&quot;"/>
                </asciiContent>
            </ResponseActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="getNextId">
        <pd:type>com.tibco.plugin.jdbc.JDBCGeneralActivity</pd:type>
        <pd:resourceType>ae.activities.JDBCGeneralActivity</pd:resourceType>
        <pd:x>167</pd:x>
        <pd:y>281</pd:y>
        <config>
            <timeout>10</timeout>
            <commit>false</commit>
            <maxRows>100</maxRows>
            <jdbcSharedConfig>/0920UpdateTables/MySql.sharedjdbc</jdbcSharedConfig>
        </config>
        <pd:inputBindings>
            <jdbcGeneralActivityInput>
                <statement>
                    <xsl:value-of select="concat(&quot;select max(&quot;,$Map-Data/root/tableName,&quot;_id)+1 from &quot;,$Map-Data/root/tableName)"/>
                </statement>
            </jdbcGeneralActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>HTTP Receiver</pd:from>
        <pd:to>SQL Direct</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>contains($HTTP-Receiver/ProcessStarterOutput/RequestURI,"UpdateDBById")</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>ShowUpdateByIdView</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>SQL Direct</pd:from>
        <pd:to>Call Process</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Call Process</pd:from>
        <pd:to>ShowUpdateByIdView</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>HTTP Receiver</pd:from>
        <pd:to>Map Data</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>contains($HTTP-Receiver/ProcessStarterOutput/RequestURI,"RealUpdate")</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Send HTTP Response</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Java Code</pd:from>
        <pd:to>UpdateSet</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Map Data</pd:from>
        <pd:to>Port</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>ShowAddPage</pd:from>
        <pd:to>ReplaceReadOnlyForAdd</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>ShowAddPageView</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>HTTP Receiver</pd:from>
        <pd:to>GetColumns</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>contains($HTTP-Receiver/ProcessStarterOutput/RequestURI,"AddToDB")</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>GetColumns</pd:from>
        <pd:to>ShowAddPage</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Port</pd:from>
        <pd:to>getNextId</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Add</pd:from>
        <pd:to>Send HTTP Response</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>UpdateSet</pd:from>
        <pd:to>Send HTTP Response</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>ReplaceReadOnlyForAdd</pd:from>
        <pd:to>ShowAddPageView</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>HTTP Receiver</pd:from>
        <pd:to>NotAllowed</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>NotAllowed</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Java Code</pd:from>
        <pd:to>Add</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$HTTP-Receiver/ProcessStarterOutput/parameters/addflag="1"</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>getNextId</pd:from>
        <pd:to>Java Code</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>